# Shell script to create animation following a simulation run

#tetgen_mesh_prefix=/home/chaste/eclipse/workspace/Chaste/mesh/test/data/2D_0_to_1mm_200_elements
#results_prefix=/home/chaste/eclipse/workspace/Chaste/testoutput/MonoDg02dWithEdgeStimulus/NewMonodomainLR91_2dWithEdgeStimulus
#out_prefix=/home/chaste/eclipse/workspace/Chaste/anim/2D_0_to_1mm

#tetgen_mesh_prefix=/home/chaste/eclipse/workspace/Chaste/mesh/test/data/2D_0_to_1mm_800_elements
#results_prefix=/home/chaste/eclipse/workspace/Chaste/testoutput/MonoDg02dWithEdgeStimulus/NewMonodomainLR91_2dWithEdgeStimulus
#out_prefix=/home/chaste/eclipse/workspace/Chaste/anim/2D_0_to_1mm_fine

#tetgen_mesh_prefix=/home/chaste/eclipse/workspace/Chaste/mesh/test/data/3D_0_to_1mm_6000_elements
#results_prefix=/home/chaste/eclipse/workspace/Chaste/testoutput/MonoDg03dWithFaceStimulus/NewMonodomainLR91_3dWithFaceStimulus
#out_prefix=/home/chaste/eclipse/workspace/Chaste/anim/3D_0_to_1mm

tetgen_mesh_prefix=/home/chaste/eclipse/workspace/Chaste/mesh/test/data/2D_0_to_1mm_200_elements
results_prefix=/home/chaste/eclipse/workspace/Chaste/testoutput/MonoDg02dWithEdgeStimulus/NewMonodomainLR91_2dWithEdgeStimulus
out_prefix=/home/chaste/eclipse/workspace/Chaste/anim/2D_0_to_1mm

# Convert node file into pts file to be read by meshalyser
cat ${tetgen_mesh_prefix}.node | head -n 1 | awk '{print $1}' > ${out_prefix}.pts

# For 1D:
#cat ${tetgen_mesh_prefix}.node | tail -n +2 | awk '{print $2 "\t" 0 "\t" 0}' >> ${out_prefix}.pts

# For 2D:
cat ${tetgen_mesh_prefix}.node | tail -n +2 | awk '{print $2 "\t" $3 "\t" 0}' >> ${out_prefix}.pts

# For 3D:
#cat ${tetgen_mesh_prefix}.node | tail -n +2 | awk '{print $2 "\t" $3 "\t" $4}' >> ${out_prefix}.pts

# Create the scalar data
rm -f ${out_prefix}.dat
for i in ${results_prefix}_0*.dat; do
  tail -n +2 $i >> ${out_prefix}.dat
done
