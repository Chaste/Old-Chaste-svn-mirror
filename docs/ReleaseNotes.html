<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Chaste Release Notes for version 1.1</title>
  </head>
  <body>

<h1>Chaste Release Notes</h1>

<h2>THIS_RELEASE (changes since Release 1.1)</h2>

<h3>Library compatibility</h3>
We have improved Chaste compatibility with its library dependencies:
<ul>
<li> MPI - Chaste is known to work with MPICH1 (mpich-1.2.7p1), MPICH2
(mpich2-1.1.1p1) and OpenMPI (1.2.7).  mpich-1.2.7p1 is recommended.  Note
that PETSc and HDF5 must be compiled with the same MPI that is used in the
Chaste configuration.</li>
<li> HDF5 - Chaste is known to work with version 1.6.6 (recommended) and
version 1.8.3.</li>
<li> PETSc - Chaste is known to work with version 2.2.1, version 2.3.2
(recommended), version 2.3.2 and version 3.0.</li>
<li> Boost - Chaste is known to work with Boost 1_33 (where there may be
back-compatibility issues with minor tests), Boost 1_34 (recommended) and
Boost 1_37.  Chaste DOES NOT WORK with Boost 1_35 due to a known bug in that 
version of Boost.</li>
</ul>

<h3>Code changes</h3>

<li>New functionality.
  <ul>
  <li>RegionAttributes can be added to Triangle/Tetgen element and face/edge files.  
  These should be non-negative and can be retrieved with <tt>mesh.GetBoundaryElement(i)->GetRegion()</tt>
  or similar.  Note that (due to the default behaviour of Triangle) edges with a region attribute of zero 
  are ignored.</li>
  </ul>
</li>

<li>Some behaviour corrections.
  <ul>
  <li>An indexing error in previous release meant that mesh produced by Chaste on the fly (slab/cuboid meshes) were not conforming.  That is, the faces did not meet correctly and the finite element approximation was discontinuous.  This behaviour has been fixed</li>
  </ul></li>

<h4>Interface changes that may require changes to user code</h4>

<ul>

<li>General:<ul>
<li><tt>LinearSystem::ZeroMatrixRow</tt> is deprecated due to inefficiency. 
Use <tt>LinearSystem::ZeroMatrixRowsWithValueOnDiagonal</tt> to modify
multiple rows instead.</li>
</ul></li>
</ul>


<h2>Release 1.1 (changes since Release 1.0)</h2>

<h3>General</h3>

<ul>
<li>Parts of the <a href="https://chaste.comlab.ox.ac.uk/cgi-bin/trac.cgi/wiki/">Chaste developers wiki</a> have now been opened to the general public.  For a guest login, use the username &quot;anonymous&quot;, and your email address as the password.</li>
<li>Improved doxygen documentation.</li>
<li>PyCml is now included in the main Chaste trunk (<tt>python/pycml</tt>).  This means that you no longer need to download it separately.  Note that the PyCml distributed with release 1 will <em>not</em> generate code compatible with Chaste release 1.1 (see also below).</li>
</ul>

<h3>Code changes</h3>

<ul>
<li>Improved code portability.
  <ul>
  <li>(Some of) Chaste can now be run under Cygwin; see the <a href="https://chaste.comlab.ox.ac.uk/cgi-bin/trac.cgi/wiki/InstallGuides/Cygwin">InstallGuides/Cygwin</a> wiki page for details.</li>
  <li>Chaste now uses version 3.2.0 of <a href="http://www.codesynthesis.com/products/xsd/">XSD</a> (although versions 2.3.1 and 3.1.1a3 are also supported for now).  This should hopefully make Chaste easier to install on Macs</li>
  </ul></li>

<li>Some behaviour corrections.
  <ul>
  <li>For a dynamic assembler, if the matrix is constant you must now call <tt>this-&gt;SetMatrixIsConstant()</tt> in the constructor otherwise the matrix will now be assembled each timestep. If your matrix is not constant in time, you were getting wrong answers before!</li>
  <li>Bidomain problems with Neumann intracellular stimuli shouldn't have a solution, and there was an implementation error before which allowed them to be solved. This has been fixed, so any test with Neumann stimuli will not work. The stimulus has to be changed to a (standard) volume stimulus.</li>
  <li>For <tt>ELEMENT_DIM == 1</tt> (in any <tt>SPACE_DIM</tt>) <tt>MeshalyzerMeshWriter</tt> will now output a .cnnx file rather than a .tri file for element connections.</li>
  </ul></li>

<li>New functionality.
  <ul>
  <li><tt>MonodomainProblem</tt> is now templated on both <tt>ELEMENT_DIM</tt> and <tt>SPACE_DIM</tt>. It will default to using <tt>ELEMENT_DIM = SPACE_DIM</tt> if only one is supplied.</li>
  <li>Several helper macros have been written for debugging, see global/Debug.hpp.</li>
  <li>Added a <tt>CombinedOdeSystem</tt> class for simple coupling of ODE systems.</li>
  </ul></li>

<li>Work in progress.
  <ul>
  <li><em>Checkpointing</em> of cardiac simulations is on the way.  Most of the components of cardiac simulations now have their own archiving methods.  Unfortunately full checkpoint and restart functionality did not make it into this release.</li>
  <li>There is functionality in the code and the XML for <em>post-processing physiological quantities</em> such as action potential duration and activation maps.  This functionality may only be used at the developer level.  If you are running the executable then requests in the XML file for post-processing will be ignored. </li>
  </ul></li>

</ul>


<h4>Interface changes that may require changes to user code</h4>

<ul>

<li>General:<ul>
<li>Triangle and tetgen binaries are no longer included with the code and must be installed and set in the <tt>PATH</tt>.  Most re-meshing still works since 2D re-mesh compiles Triangle code from source (which is included).</li>
<li>The <a href="https://chaste.comlab.ox.ac.uk/cgi-bin/trac.cgi/wiki/CodeStructureStrategy#Policyonincludes"><tt>#include</tt> policy</a> has changed. It might be the case that tests that used to compile are unable to find certain header files now. Please <tt>#include</tt> such headers explicitly as needed.</li>
<li>It is now impossible to create vectors (either PETSc <tt>Vec</tt>s or <tt>DistributedVector</tt>s) directly from a <tt>DistributedVector</tt>.  This must now be done via a <tt>DistributedVectorFactory</tt>.  If you have a mesh, a factory can be obtained using the <tt>GetDistributedVectorFactory</tt> method.  The cardiac PDEs also store a factory.</li>
<li>Static iterators are not available anymore in <tt>DistributedVector</tt>. You can access the iterator from a <tt>DistributedVector</tt> object. If there isn't one in scope, use <tt>GetLow()</tt> and <tt>GetHigh()</tt> in <tt>DistributedVectorFactory</tt> (accessible via any mesh object).</li>
<li>For a dynamic assembler, if the matrix is constant you must now call <tt>this-&gt;SetMatrixIsConstant()</tt> in the constructor otherwise the matrix will now be assembled each timestep. If your matrix is not constant in time, you were getting wrong answers before!</li>
<li>Renamed <tt>PetscTools::NumProcs</tt> to <tt>PetscTools::GetNumProcs</tt>.</li>
<li>Renamed <tt>AbstractMesh</tt> to <tt>AbstractTetrahedralMesh</tt>, there is a new <tt>AbstractMesh</tt> class, which will handle non-tetrahedral meshes.</li>
</ul></li>

<li>Heart:<ul>
<li><tt>this-&gt;mpMesh</tt> is no longer directly available to cell factories, as it can be used accidentally while unset. Use the <tt>GetMesh()</tt> method instead.</li>
<li>Cardiac cell models are now constructed using <tt>boost::shared_ptr&lt;&gt;</tt> instead of normal pointers for the 'stimulus' and 'ode solver' arguments.  This will require changes to cell factories too.  See files <tt>heart/test/ionicmodels/TestIonicModels.hpp</tt> and <tt>heart/src/problem/PlaneStimulusCellFactory.hpp</tt> for examples of the new usage.</li>
</ul></li>

<li>Cancer:<ul>
<li><tt>WntConcentration</tt> is now templated over dimension. You will have to pass in the dimension when constructing any Wnt-dependent cell cycle model.</li>
<li><tt>SloughingCellKiller</tt> is also now templated over dimension.</li>
<li><tt>FixedCellCycleModel</tt>, <tt>StochasticCellCycleModel</tt>, and the two corresponding <tt>CellGenerators</tt> have been renamed (to <tt>FixedDurationGenerationBasedCellCycleModel</tt> and <tt>StochasticDurationGenerationBasedCellCycleModel</tt> respectively).</li>
<li>The <tt>CancerParameters</tt> singleton class has been renamed <tt>TissueConfig</tt> (to match the heart code).</li>
<li><tt>cancer/src/tissue/MeshArchiveInfo</tt> has been replaced by <tt>global/src/ArchiveLocationInfo</tt>, which has slightly different usage.</li>
</ul></li>

</ul>

<p>
Also, xsd should be defined in your hostconfig file (if it isn't on your <tt>PATH</tt>) in the form <tt>tools = {'xsd':'FILL_IN_PATH_TO_XSD_BINARY'</tt>} as it regenerates <tt>ChasteParameters.hpp/cpp</tt> during the build process.
</p>


  </body>
</html>
