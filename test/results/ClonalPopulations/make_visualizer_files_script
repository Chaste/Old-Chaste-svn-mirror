#!/bin/bash
# For use on the results of TestMutationSpread.hpp
#
# This script compiles the output from several different runs, 
# defined by filling in the SETUP section below. 
#
# It prints out one line of visualizer output out of
# every 25 and sticks files together to make movies more simply.
#

# BEGIN SETUP
results=$CHASTE_TEST_OUTPUT/MutationSpread
first_experiment=1050
last_experiment=1780
# END OF SETUP

echo "Cleaning up previous results files"

if cd $results; then
	rm -f results.viznodes
	rm -f results.vizelements
	rm -f results.vizsetup
else
	echo "Could not change directory! Aborting." 1>&2
	exit 1
fi

echo "Compiling results files"
for (( i=$first_experiment ; i<=$last_experiment ; i=i+10 ))
do
	echo "results $i"
	awk '{if (NR%25==0) print}' results_from_time_"$i"/vis_results/results.viznodes >> results.viznodes
	awk '{if (NR%25==0) print}' results_from_time_"$i"/vis_results/results.vizelements >> results.vizelements
done
